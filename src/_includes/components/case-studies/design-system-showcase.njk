{% if designSystem %}
<div class="case-study-section design-system-section">
  <h2>{{ designSystem.title }}</h2>
  
  <div class="design-system-intro">
    <p>{{ designSystem.intro }}</p>
  </div>
  
  <div class="design-system-tabs">
    <button class="tab-btn active" data-tab="colors">{{ designSystem.colorPalette.title }}</button>
    <button class="tab-btn" data-tab="typography">{{ designSystem.typography.title }}</button>
    <button class="tab-btn" data-tab="components">{{ designSystem.components.title }}</button>
    <button class="tab-btn" data-tab="buttons">{{ designSystem.buttons.title }}</button>
    <button class="tab-btn" data-tab="forms">{{ designSystem.forms.title }}</button>
    <button class="tab-btn" data-tab="cards">{{ designSystem.cards.title }}</button>
    <button class="tab-btn" data-tab="badges">{{ designSystem.badges.title }}</button>
    <button class="tab-btn" data-tab="navigation">{{ designSystem.navigation.title }}</button>
    <button class="tab-btn" data-tab="messages">{{ designSystem.messages.title }}</button>
  </div>
  
  <div class="tab-content active" id="colors-tab">
    <h3>{{ designSystem.colorPalette.title }}</h3>
    <p>{{ designSystem.colorPalette.description }}</p>
    
    <div class="color-palette">
      {% for color in designSystem.colorPalette.colors %}
      <div class="color-swatch">
        <div class="color-preview" style="background-color: {{ color.hex }}">
          <span class="color-name-preview">{{ color.name }}</span>
        </div>
        <div class="color-info">
          <div class="color-name">{{ color.name }}</div>
          <div class="color-hex">{{ color.hex }}</div>
          <div class="color-usage">{{ color.usage }}</div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content" id="typography-tab">
    <h3>{{ designSystem.typography.title }}</h3>
    <p>{{ designSystem.typography.description }}</p>
    
    <div class="typography-showcase">
      {% for font in designSystem.typography.fonts %}
      <div class="font-family {% if loop.index == 1 %}primary-font{% elif loop.index == 2 %}code-font{% endif %}">
        <div class="font-header">
          <div class="font-name">{{ font.name }}</div>
          <div class="font-category">{{ font.category }}</div>
        </div>
        <div class="font-details">
          <div class="font-weights">{{ font.weights }}</div>
          <div class="font-usage">{{ font.usage }}</div>
        </div>
        <div class="font-sample">
          {% if loop.index == 1 %}
          <div class="sample-xl">{{ designSystem.typography.fontSizes[0].name }}</div>
          <div class="sample-large">{{ designSystem.typography.fontSizes[1].name }}</div>
          <div class="sample-medium">{{ designSystem.typography.fontSizes[2].name }}</div>
          <div class="sample-body">{{ designSystem.typography.fontSizes[3].name }}: {{ designSystem.typography.fontSizes[3].usage }}</div>
          <div class="sample-small">{{ designSystem.typography.fontSizes[4].name }}: {{ designSystem.typography.fontSizes[4].usage }}</div>
          {% elif loop.index == 2 %}
          <div class="sample-body">function calculateDamages(caseType, amount) {<br>  return caseType === 'liability' ? amount * 1.5 : amount;<br>}</div>
          <div class="sample-small">// Legal reference: ยง304.2-p</div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    
    <div class="font-sizes">
      <h4>Font Sizes</h4>
      <div class="font-size-grid">
        {% for fontSize in designSystem.typography.fontSizes %}
        <div class="font-size-item">
          <div class="font-size-name">{{ fontSize.name }}</div>
          <div class="font-size-value">{{ fontSize.size }}</div>
          <div class="font-size-usage">{{ fontSize.usage }}</div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  
  <div class="tab-content" id="components-tab">
    <h3>{{ designSystem.components.title }}</h3>
    <p>{{ designSystem.components.description }}</p>
    
    <div class="component-library">
      {% for category in designSystem.components.categories %}
      <div class="component-category">
        <div class="category-name">{{ category.name }}</div>
        <div class="component-list">
          {% for component in category.components %}
          <div class="component-tag">{{ component }}</div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content" id="buttons-tab">
    <h3>{{ designSystem.buttons.title }}</h3>
    <p>{{ designSystem.buttons.description }}</p>
    
    <div class="buttons-showcase">
      <div class="button-group">
        {% for type in designSystem.buttons.types %}
        <button class="{% if projectKey == 'nomadix' %}nomadix-btn nomadix-btn-{{ type.class and (type.class | replace('jl-btn ', '') | replace('jl-btn-', '') | trim) or 'primary' }}{% else %}{{ type.class or 'jl-btn jl-btn-primary' }}{% endif %}">{{ type.name }}</button>
        {% endfor %}
      </div>
      
      <div class="button-states">
        {% for state in designSystem.buttons.states %}
        <button class="{% if projectKey == 'journeylaw' %}jl-btn jl-btn-primary{% elif projectKey == 'nomadix' %}nomadix-btn nomadix-btn-primary{% endif %} {% if loop.index > 1 and loop.index < 5 %}{% if projectKey == 'journeylaw' %}jl-{% elif projectKey == 'nomadix' %}nomadix-{% endif %}{{ state | lower }}{% endif %}" {% if loop.index == 5 %}disabled{% endif %}>{{ state }}</button>
        {% endfor %}
      </div>
    </div>
  </div>
  
  <div class="tab-content" id="forms-tab">
    <h3>{{ designSystem.forms.title }}</h3>
    <p>{{ designSystem.forms.description }}</p>
    
    <div class="forms-showcase">
      {% for element in designSystem.forms.elements %}
      <div class="form-group">
        {% if loop.index == 1 %}
        <label for="demo-input">{{ element.name }}</label>
        <input type="text" id="demo-input" class="{% if projectKey == 'journeylaw' %}jl-input{% elif projectKey == 'nomadix' %}nomadix-input{% endif %}" placeholder="Enter text here">
        {% elif loop.index == 2 %}
        <label for="demo-select">{{ element.name }}</label>
        <select id="demo-select" class="{% if projectKey == 'journeylaw' %}jl-select{% elif projectKey == 'nomadix' %}nomadix-select{% endif %}">
          <option>Option 1</option>
          <option>Option 2</option>
          <option>Option 3</option>
        </select>
        {% elif loop.index == 3 %}
        <label class="checkbox-label">
          <input type="checkbox" class="{% if projectKey == 'journeylaw' %}jl-checkbox{% elif projectKey == 'nomadix' %}nomadix-checkbox{% endif %}">
          <span>{{ element.name }} Option</span>
        </label>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content" id="cards-tab">
    <h3>{{ designSystem.cards.title }}</h3>
    <p>{{ designSystem.cards.description }}</p>
    
    <div class="cards-showcase">
      <div class="{% if projectKey == 'journeylaw' %}jl-card{% elif projectKey == 'nomadix' %}nomadix-card{% endif %}">
        <div class="{% if projectKey == 'journeylaw' %}jl-card-header{% elif projectKey == 'nomadix' %}nomadix-card-header{% endif %}">
          <h4>{{ designSystem.cards.samples[0].title }}</h4>
        </div>
        <div class="{% if projectKey == 'journeylaw' %}jl-card-body{% elif projectKey == 'nomadix' %}nomadix-card-body{% endif %}">
          <p>{{ designSystem.cards.samples[0].content }}</p>
        </div>
        <div class="{% if projectKey == 'journeylaw' %}jl-card-footer{% elif projectKey == 'nomadix' %}nomadix-card-footer{% endif %}">
          <button class="{% if projectKey == 'journeylaw' %}jl-btn jl-btn-text{% elif projectKey == 'nomadix' %}nomadix-btn nomadix-btn-text{% endif %}">{{ designSystem.cards.samples[0].action }}</button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="tab-content" id="badges-tab">
    <h3>{{ designSystem.badges.title }}</h3>
    <p>{{ designSystem.badges.description }}</p>
    
    <div class="badges-showcase">
      {% for badge in designSystem.badges.types %}
      <span class="{% if projectKey == 'nomadix' %}{% if badge.class %}{{ badge.class | replace('jl-badge', 'nomadix-badge') | replace('jl-badge-', 'nomadix-badge-') }}{% else %}nomadix-badge nomadix-badge-primary{% endif %}{% else %}{{ badge.class or 'jl-badge jl-badge-primary' }}{% endif %}">{{ badge.label }}</span>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content" id="navigation-tab">
    <h3>{{ designSystem.navigation.title }}</h3>
    <p>{{ designSystem.navigation.description }}</p>
    
    <div class="navigation-showcase">
      <div class="{% if projectKey == 'journeylaw' %}jl-nav-sample{% elif projectKey == 'nomadix' %}nomadix-nav-sample{% endif %}">
        <div class="{% if projectKey == 'journeylaw' %}jl-tabs{% elif projectKey == 'nomadix' %}nomadix-tabs{% endif %}">
          {% for tab in designSystem.navigation.tabs %}
          <button class="{% if projectKey == 'journeylaw' %}jl-tab{% elif projectKey == 'nomadix' %}nomadix-tab{% endif %} {% if loop.index == 1 %}active{% endif %}">{{ tab }}</button>
          {% endfor %}
        </div>
      </div>
      
      <div class="{% if projectKey == 'journeylaw' %}jl-breadcrumbs{% elif projectKey == 'nomadix' %}nomadix-breadcrumbs{% endif %}">
        {% for crumb in designSystem.navigation.breadcrumbs %}
        <span>{{ crumb }}</span>
        {% if not loop.last %}
        <span class="{% if projectKey == 'journeylaw' %}jl-breadcrumb-separator{% elif projectKey == 'nomadix' %}nomadix-breadcrumb-separator{% endif %}">โบ</span>
        {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
  
  <div class="tab-content" id="messages-tab">
    <h3>{{ designSystem.messages.title }}</h3>
    <p>{{ designSystem.messages.description }}</p>
    
    <div class="messages-showcase">
      {% for alert in designSystem.messages.alerts %}
      <div class="{% if projectKey == 'journeylaw' %}jl-alert jl-alert-{{ alert.type }}{% elif projectKey == 'nomadix' %}nomadix-alert nomadix-alert-{{ alert.type }}{% endif %}">
        <div class="{% if projectKey == 'journeylaw' %}jl-alert-icon{% elif projectKey == 'nomadix' %}nomadix-alert-icon{% endif %}">{{ alert.icon }}</div>
        <div class="{% if projectKey == 'journeylaw' %}jl-alert-content{% elif projectKey == 'nomadix' %}nomadix-alert-content{% endif %}">{{ alert.content }}</div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endif %}
