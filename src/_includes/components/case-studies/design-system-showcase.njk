{% if designSystem %}
<div class="case-study-section design-system-section">
  <h2>{{ designSystem.title }}</h2>
  
  <div class="design-system-intro">
    <p>{{ designSystem.intro }}</p>
  </div>
  
  <div class="design-system-tabs-container">
    <div class="design-system-tabs">
      <button class="tab-btn active" data-tab="colors">{{ designSystem.colorPalette.title | default("Colors") }}</button>
      <button class="tab-btn" data-tab="typography">{{ designSystem.typography.title | default("Typography") }}</button>
      {% if designSystem.layout %}
      <button class="tab-btn" data-tab="layout">{{ designSystem.layout.title | default("Layout") }}</button>
      {% endif %}
      
      {% for key, component in designSystem.components %}
      <button class="tab-btn" data-tab="{{ key }}">{{ component.title }}</button>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content active" id="colors-tab">
    <h3>{{ designSystem.colorPalette.title }}</h3>
    {% if designSystem.colorPalette.description %}
    <p>{{ designSystem.colorPalette.description }}</p>
    {% endif %}
    
    <div class="color-palette">
      {% for color in designSystem.colorPalette.colors %}
      <div class="color-swatch">
        <div class="color-preview" style="background-color: {{ color.hex }}">
          <span class="color-name-preview">{{ color.name }}</span>
        </div>
        <div class="color-info">
          <div class="color-name">{{ color.name }}</div>
          <div class="color-hex">{{ color.hex }}</div>
          <div class="color-usage">{{ color.usage }}</div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div class="tab-content" id="typography-tab">
    <h3>{{ designSystem.typography.title }}</h3>
    {% if designSystem.typography.description %}
    <p>{{ designSystem.typography.description }}</p>
    {% endif %}
    
    <div class="typography-showcase">
      {% for font in designSystem.typography.fonts %}
      <div class="font-family">
        <div class="font-header">
          <div class="font-name">{{ font.name }}</div>
          <div class="font-category">{{ font.category }}</div>
        </div>
        <div class="font-details">
          <div class="font-weights">{{ font.weights }}</div>
          <div class="font-usage">{{ font.usage }}</div>
        </div>
      </div>
      {% endfor %}
    </div>
    
    <div class="font-sizes">
      <h4>Font Sizes</h4>
      <div class="font-size-grid">
        {% for fontSize in designSystem.typography.fontSizes %}
        <div class="font-size-item">
          <div class="font-size-name">{{ fontSize.name }}</div>
          <div class="font-size-value">{{ fontSize.size }}</div>
          <div class="font-size-usage">{{ fontSize.usage }}</div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  {% if designSystem.layout %}
  <div class="tab-content" id="layout-tab">
    <h3>{{ designSystem.layout.title }}</h3>
    {% if designSystem.layout.description %}
    <p>{{ designSystem.layout.description }}</p>
    {% endif %}
    
    {% if designSystem.layout.spacing %}
    <div class="spacing-system">
      <h4>Spacing</h4>
      <div class="spacing-grid">
        {% for space in designSystem.layout.spacing %}
        <div class="spacing-item">
          <div class="spacing-name">{{ space.name }}</div>
          <div class="spacing-value">{{ space.value }}</div>
          <div class="spacing-usage">{{ space.usage }}</div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
  {% endif %}
  
  {% for key, component in designSystem.components %}
  <div class="tab-content" id="{{ key }}-tab">
    <h3>{{ component.title }}</h3>
    {% if component.description %}
    <p class="component-description">{{ component.description }}</p>
    {% endif %}
    
    {% if component.usageGuidelines %}
    <div class="usage-guidelines">
      <div class="guideline guideline-usage">
        <strong>When to use:</strong> {{ component.usageGuidelines.whenToUse }}
      </div>
      <div class="guideline guideline-a11y">
        <strong>Accessibility:</strong> {{ component.usageGuidelines.accessibility }}
      </div>
    </div>
    {% endif %}
    
    {% if component.variants %}
    <div class="component-variants">
      {% for variant in component.variants %}
      <div class="variant-card">
        <div class="variant-header">
          <h4>{{ variant.name }}</h4>
          {% if variant.class %}
          <code class="variant-class">.{{ variant.class }}</code>
          {% endif %}
        </div>
        <p class="variant-description">{{ variant.description }}</p>
        
        {% if variant.designTokens %}
        <div class="design-tokens">
          <h5>Design Tokens</h5>
          <ul class="tokens-list">
            {% for tokenKey, tokenValue in variant.designTokens %}
            <li><strong>{{ tokenKey | capitalize }}:</strong> {{ tokenValue }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
        
        {% if variant.states %}
        <div class="component-states">
          <h5>Interaction States</h5>
          <ul class="states-list">
            {% for stateKey, stateDesc in variant.states %}
            <li>
              <span class="state-badge state-{{ stateKey }}">{{ stateKey | capitalize }}</span>
              <span class="state-desc">{{ stateDesc }}</span>
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}
    
  </div>
  {% endfor %}
  
</div>
{% endif %}
